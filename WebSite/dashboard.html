<?php
	require('Connect.php');

    session_start();
   
?>
<!DOCTYPE html>
<html>
  <head>
      <script src="JavaScript/Chart.bundle.js"></script>
      <script src="JavaScript/Chart.bundle.min.js"></script>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width">
      <meta name="description" content="CIS4301 Spring 2018 Group 3 Project">
      <meta name="keywords" content="crypto currency">
      <meta name="author" content="Doug Masini, Michael Howerter, Nicolas Werner">
      <title>Crypto Currency Database | Dashboard</title>
    <link rel="stylesheet" href="./css/style.css">     
  </head>
  <body>
    <header>
      <div class="container">
        <div id="branding">
          <h1><span class="highlight">Cryptocurrency Database</span></h1>
        </div>
        <nav>
          <ul>
            <li class="current"><a href="dashboard.html">Home</a></li>
            <li><a href="compare.html">Compare</a></li>
            <li><a href="archive.html">Archive</a></li>
            <li><a href="heatmap.html">Heat Map</a></li>
            <li><a href="welcome.html?logout=true">Logout</a></li>			
          </ul>
        </nav>		
      </div>	  
    </header>

    <section id="main">
      <div class="container">
        <article id="main-col">
          <h1 class="page-title">Main Dashboard</h1>
		  <div class="page-title">User: <?php if(isset($_SESSION['id'])){echo $_SESSION['id']; echo $_SESSION['crypto'];}?></div>		  
          <canvas id="myChart" width="800" height="400"></canvas>           
            <script>
                var ctx = document.getElementById("myChart").getContext("2d");
                var myChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ["1", "2", "3", "4", "5", "6"],
                        datasets: [{
                            label: 'Currency Values',
                            data: [12, 19, 3, 5, 2, 3],
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.2)',
                                'rgba(54, 162, 235, 0.2)',
                                'rgba(255, 206, 86, 0.2)',
                                'rgba(75, 192, 192, 0.2)',
                                'rgba(153, 102, 255, 0.2)',
                                'rgba(255, 159, 64, 0.2)'
                            ],
                            borderColor: [
                                'rgba(255,99,132,1)',
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 206, 86, 1)',
                                'rgba(75, 192, 192, 1)',
                                'rgba(153, 102, 255, 1)',
                                'rgba(255, 159, 64, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            yAxes: [{
                                ticks: {
                                    beginAtZero:true
                                }
                            }]
                        }
                    }
                   });
            </script>          
        </article>     
      </div>
    </section>
	<section id="main">
      <div class="container">
        <article id="sidebar">
          <div class="dark">
            <h3>Account Details</h3>
            <form class="quote" action ="" method="post" >
				<select name="curr_crypto_list">
				<?php
				
				if(isset($_SESSION['cryptoList']))
					{
						for ($i = 0; $i < count($_SESSION['cryptoList']); $i++)
						{						   
							echo "<option>";
							echo $_SESSION['cryptoList'][$i];
							echo "</option>";				
						}
					}
				?>
			    </select>
  			    <div>
  				    <label>User Name</label><br>  		
                    <label><?php if(isset($_SESSION['id'])){echo $_SESSION['id'];}?></label><br>  						
  			    </div>     
  			    <div>
  				    <label>Favorite Cryptocurrencies</label><br>  		
                    <label><?php if(isset($_SESSION['crypto'])){echo $_SESSION['crypto'];}?></label><br>  						
  			    </div>
  			    <button class="button_1" name=update_button type="submit">Update</button>
				<div id="error">
				  <span class="highlight">
					<?php 
					if (!empty($_SESSION['error']))
					{
						echo $_SESSION['error'];			
						unset($_SESSION['error']);
					}  
					?>
				   </span>
                </div> 
			</form>
          </div>
        </article>
      </div>
    </section>

    <footer>
      <p>CIS4301 Spring 2018 Group 3 Project. Created by: Doug Masini, Michael Howerter, Nicolas Werner</p>
    </footer>
  </body>
</html>
